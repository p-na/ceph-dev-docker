#!/bin/bash
CEPH_IMAGE=${CEPH_IMAGE:-pnaw/ceph-dev:tumbleweed}

function tag_image {
    date=$(date +%F)
    echo "docker image tag $CEPH_IMAGE ${CEPH_IMAGE}:${date//-/}"
    docker image tag $CEPH_IMAGE ${CEPH_IMAGE}:${date//-/}
}
function build {
    tag_image
    echo "docker build -t $CEPH_IMAGE ."
    docker build -t $CEPH_IMAGE .
}
function buildnc {
    tag_image
    echo "docker build -t $CEPH_IMAGE --no-cache ."
    docker build -t $CEPH_IMAGE --no-cache .
}

if [ "$1" = "nc" ] ; then
    buildnc
else
    build
fi
